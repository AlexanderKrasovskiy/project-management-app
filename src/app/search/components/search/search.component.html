<ng-container *transloco="let transLoco; read: 'search'">
  <section class="search">
    <div class="search-small-circle-fake"></div>
    <div class="search-small-circle shadow-3 scale"></div>
    <div class="search__title-wrap">
      <a
        pButton
        pRipple
        type="button"
        icon="pi pi-arrow-left"
        (click)="this.search.goBack()"
        class="back_btn p-button-rounded p-button-warning"></a>
      <h1 class="search__title card-with-blur scale">
        {{ transLoco('mainTitle') }}
      </h1>
    </div>
    <div class="w-12 md:w-10 search-wrap">
      <div class="card-simple search-card shadow-4">
        <div class="card-with-blur search-card-inside shadow-4">
          <table
            *ngIf="this.tasksSubj$ | async as tasks"
            class="table text-xs sm:text-sm md:text-base">
            <thead>
              <tr>
                <th
                  (click)="this.filterService.changeSortValue(sort.byOrder)"
                  [class.active]="
                    this.filterService.activeClass === sort.byOrder
                  ">
                  {{ transLoco('order') }}
                  <span
                    class="arrow"
                    *ngIf="!this.filterService.isOrder; else blockOrder">
                    ▼▲
                  </span>
                  <ng-template #blockOrder class="arrow active">
                    {{ this.filterService.sortingDirection }}
                  </ng-template>
                </th>
                <th
                  (click)="this.filterService.changeSortValue(sort.byTitle)"
                  [class.active]="
                    this.filterService.activeClass === sort.byTitle
                  ">
                  {{ transLoco('title') }}
                  <span
                    class="arrow"
                    *ngIf="!this.filterService.isTitle; else blockTitle">
                    ▼▲
                  </span>
                  <ng-template #blockTitle class="arrow active">
                    {{ this.filterService.sortingDirection }}
                  </ng-template>
                </th>
                <th
                  (click)="
                    this.filterService.changeSortValue(sort.byDescription)
                  "
                  [class.active]="
                    this.filterService.activeClass === sort.byDescription
                  ">
                  {{ transLoco('description') }}
                  <span
                    class="arrow"
                    *ngIf="
                      !this.filterService.isDescription;
                      else blockDescription
                    ">
                    ▼▲
                  </span>
                  <ng-template #blockDescription class="arrow active">
                    {{ this.filterService.sortingDirection }}
                  </ng-template>
                </th>
                <th
                  (click)="this.filterService.changeSortValue(sort.byUser)"
                  [class.active]="
                    this.filterService.activeClass === sort.byUser
                  ">
                  {{ transLoco('user') }}
                  <span
                    class="arrow"
                    *ngIf="!this.filterService.isUser; else blockUser">
                    ▼▲
                  </span>
                  <ng-template #blockUser class="arrow active">
                    {{ this.filterService.sortingDirection }}
                  </ng-template>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="
                  let task of tasks
                    | sorting: 'word':this.headerService.keyWord
                    | sorting
                      : this.filterService.valueSort
                      : this.filterService.flagSortDirection
                "
                [routerLink]="['/boards', task.boardId]">
                <td>{{ task.order }}</td>
                <td>{{ task.title | slice: 0:80 }}</td>
                <td>{{ task.description | slice: 0:80 }}</td>
                <td>{{ task.userId | slice: 0:30 }}</td>
              </tr>
              <tr *ngIf="this.headerService.keyWord" class="no-item">
                <td class="notfound">{{ transLoco('notFound') }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>
</ng-container>
